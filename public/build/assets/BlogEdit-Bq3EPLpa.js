import{r as y,j as e,a as v}from"./app-fjtTz2h4.js";import{d as w}from"./index-B-WG8qPp.js";import{A as N}from"./AdminLayout-Bpo7sCUK.js";/* empty css                      */import{L as C}from"./index-CZx9uylL.js";import{s as S,a as b}from"./toast-CZhICbN6.js";import"./Sidebar-v-2myCdC.js";const I=({blog:a,categories:p})=>{const{data:s,setData:i,processing:l,errors:t}=w.useForm({image:a.image||"",title:a.title||"",summary:a.summary||"",description:a.description||"",date:a.date||new Date().toISOString().split("T")[0],published_by:a.published_by||"",category:a.category||"technical",type:a.type||"",slug:a.slug||""}),[g,m]=y.useState(!1),[n,h]=y.useState(a.image?`/storage/${a.image}`:null),f=async r=>{var c,u;r.preventDefault(),m(!0);const o=new FormData;["title","summary","description","date","published_by","category","slug"].forEach(d=>{s[d]!==void 0&&o.append(d,s[d])}),s.image instanceof File?o.append("image",s.image):s.image||o.append("image","");try{const d=await v.post(route("blogs.update",a.id),o,{headers:{"Content-Type":"multipart/form-data","X-HTTP-Method-Override":"PATCH"}});S(d.data.success)}catch(d){if(console.error("Update error:",d),d.response&&d.response.data.errors){const x=d.response.data.errors;Object.keys(x).forEach(k=>{b(x[k][0])})}else b(((u=(c=d.response)==null?void 0:c.data)==null?void 0:u.message)||"Failed to update blog")}finally{m(!1)}},j=()=>{const r=s.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");i("slug",r)};return e.jsxs(N,{children:[e.jsx(C,{}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-100 rounded-lg shadow",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Edit Blog"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:r=>{r.target.files&&r.target.files[0]&&(i("image",r.target.files[0]),h(URL.createObjectURL(r.target.files[0])))}}),t.image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.image}),e.jsx("div",{className:"mt-4",children:n?e.jsx("img",{src:n,alt:"Preview",className:"h-40 object-cover rounded-md border"}):a.image&&e.jsx("img",{src:a.image,alt:"Current",className:"h-40 object-cover rounded-md border"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title*"}),e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s.title,onChange:r=>i("title",r.target.value),required:!0}),t.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug*"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-l-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s.slug,onChange:r=>i("slug",r.target.value),required:!0}),e.jsx("button",{type:"button",onClick:j,className:"mt-1 px-3 py-2 bg-gray-200 dark:bg-gray-700 dark:text-white rounded-r-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"Generate"})]}),t.slug&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Published By*"}),e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s.published_by,onChange:r=>i("published_by",r.target.value),readOnly:!0}),t.published_by&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.published_by})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date*"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s.date,onChange:r=>i("date",r.target.value),required:!0}),t.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category*"}),e.jsx("select",{className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:s.category,onChange:r=>i("category",r.target.value),required:!0,children:p.map(r=>e.jsx("option",{value:r,children:r.charAt(0).toUpperCase()+r.slice(1)},r))}),t.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Summary"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:3,value:s.summary,onChange:r=>i("summary",r.target.value)}),t.summary&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.summary})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description*"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:6,value:s.description,onChange:r=>i("description",r.target.value),required:!0}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.description})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",disabled:g||l,children:g||l?"Updating...":"Update Blog"})})]})]})]})};export{I as default};
