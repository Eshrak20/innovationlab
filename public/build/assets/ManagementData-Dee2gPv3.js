import{A as N}from"./AdminLayout-16zh0mwS.js";import{r as i,j as e,b as D,a as b}from"./app-ByAdp2Te.js";import{L as E}from"./index-jlAGSNPD.js";import{a as g,s as f}from"./toast-DpH_NK_S.js";/* empty css                      */import{F as j}from"./index.es-BnScvB0q.js";import{a as S,b as C}from"./index-DikOPaW-.js";import"./Sidebar-CUSKDBKr.js";import"./index-Chjiymov.js";const R=({managementData:k})=>{const[m,y]=i.useState(k),[s,l]=i.useState(null),[r,o]=i.useState({title:"",number:""}),[h,p]=i.useState(!1),v=t=>{l(t.id),o({title:t.title,number:t.number.toString()})},c=async t=>{var a,d;if(!r.title||!r.number){g("Please enter both title and number");return}p(!0);try{const{data:n}=await b.put(`managementData/${t}`,{title:r.title,number:parseInt(r.number)});y(x=>x.map(u=>u.id===t?{...u,...n.data}:u)),f("Data updated successfully"),l(null)}catch(n){console.error("Update error:",n);const x=((d=(a=n.response)==null?void 0:a.data)==null?void 0:d.message)||"Failed to update data";g(x)}finally{p(!1)}},w=async t=>{if(confirm("Are you sure you want to delete this item?"))try{await b.delete(`management-data/${t}`),y(a=>a.filter(d=>d.id!==t)),f("Data deleted successfully")}catch(a){console.error("Delete error:",a),g("Failed to delete item")}};return e.jsxs(N,{children:[e.jsx(D,{title:"Management Data"}),e.jsx(E,{}),e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Management Metrics"}),e.jsxs("div",{className:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200 px-3 py-1 rounded-full text-sm font-medium",children:[m.length," Records"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Metric"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-40",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:s===t.id?e.jsx("input",{type:"text",value:r.title,onChange:a=>o({...r,title:a.target.value}),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),c(s))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:t.title})}),e.jsx("td",{className:"px-6 py-4",children:s===t.id?e.jsx("input",{type:"number",value:r.number,onChange:a=>o({...r,number:a.target.value}),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),c(s))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):e.jsxs("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:[t.number,"+"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s===t.id?e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>l(null),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-100 rounded-md text-xs",children:"Cancel"}),e.jsx("button",{onClick:()=>c(t.id),disabled:h,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs disabled:opacity-50",children:h?"Saving...":"Save"})]}):e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>v(t),className:"action-button edit-btn",title:"Edit",children:e.jsx(j,{icon:S})}),e.jsx("button",{onClick:()=>w(t.id),className:"action-button delete-btn",title:"Delete",children:e.jsx(j,{icon:C})})]})})]},t.id))})]})})})]})]})};export{R as default};
