import{r as u,j as e,a as y}from"./app-ByAdp2Te.js";import{d as j}from"./index-DxCcORiw.js";import{A as k}from"./AdminLayout-16zh0mwS.js";import{L as N}from"./index-jlAGSNPD.js";import{a as c,s as w}from"./toast-DpH_NK_S.js";import"./Sidebar-CUSKDBKr.js";const F=({service:d})=>{const{data:a,setData:i,processing:v,errors:s}=j.useForm({title:d.title||"",short_description:d.short_description||"",description:d.description||"",icon:d.icon||"",image:d.image||"",is_featured:!!d.is_featured}),[n,l]=u.useState(!1),[m,h]=u.useState(d.image?`/storage/${d.image}`:null),b=async t=>{var x,g;if(t.preventDefault(),l(!0),typeof a.is_featured!="boolean"){c("Feature status must be either true or false."),l(!1);return}const o=new FormData;Object.keys(a).forEach(r=>{r==="is_featured"?o.append(r,a[r]?"1":"0"):r!=="image"&&o.append(r,a[r])}),a.image instanceof File&&o.append("image",a.image);try{const r=await y.post(route("services.update",d.id),o,{headers:{"Content-Type":"multipart/form-data","X-HTTP-Method-Override":"PATCH"}});w(r.data.success||"Service updated")}catch(r){console.error(r);const p=(g=(x=r.response)==null?void 0:x.data)==null?void 0:g.errors;p?Object.values(p).forEach(f=>c(f[0])):c("Failed to update service")}finally{l(!1)}};return e.jsxs(k,{children:[e.jsx(N,{}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Edit Service"}),e.jsxs("form",{onSubmit:b,encType:"multipart/form-data",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title*"}),e.jsx("input",{type:"text",value:a.title,onChange:t=>i("title",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm",required:!0}),s.title&&e.jsx("p",{className:"text-red-500 text-sm",children:s.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Icon (class or URL)"}),e.jsx("input",{type:"text",value:a.icon,onChange:t=>i("icon",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"}),s.icon&&e.jsx("p",{className:"text-red-500 text-sm",children:s.icon})]}),e.jsx("div",{className:"col-span-2",children:e.jsxs("label",{className:"inline-flex items-center mt-2",children:[e.jsx("input",{type:"checkbox",checked:a.is_featured,onChange:t=>i("is_featured",t.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Feature on homepage"})]})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Short Description"}),e.jsx("textarea",{value:a.short_description,onChange:t=>i("short_description",t.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"}),s.short_description&&e.jsx("p",{className:"text-red-500 text-sm",children:s.short_description})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Full Description"}),e.jsx("textarea",{value:a.description,onChange:t=>i("description",t.target.value),rows:5,className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"}),s.description&&e.jsx("p",{className:"text-red-500 text-sm",children:s.description})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{t.target.files&&t.target.files[0]&&(i("image",t.target.files[0]),h(URL.createObjectURL(t.target.files[0])))},className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white shadow-sm"}),s.image&&e.jsx("p",{className:"text-red-500 text-sm",children:s.image}),e.jsx("div",{className:"mt-4",children:m&&e.jsx("img",{src:m,alt:"Preview",className:"h-40 rounded-md object-cover border"})})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",children:n?"Updating...":"Update Service"})})]})]})]})};export{F as default};
