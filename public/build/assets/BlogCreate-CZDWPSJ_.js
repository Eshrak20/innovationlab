import{r as p,j as e,a as k}from"./app-fjtTz2h4.js";import{A as j}from"./AdminLayout-Bpo7sCUK.js";/* empty css                      */import{L as f}from"./index-CZx9uylL.js";import{s as w,a as N}from"./toast-CZhICbN6.js";import{d as v}from"./index-B-WG8qPp.js";import"./Sidebar-v-2myCdC.js";const F=({categories:x,adminProfile:s})=>{const{data:a,setData:d,reset:u,processing:l,errors:r}=v.useForm({image:"",title:"",summary:"",description:"",date:new Date().toISOString().split("T")[0],published_by:(s==null?void 0:s.name)||"Unknown",profile_photo:(s==null?void 0:s.photo)||"",category:"technical",type:"",slug:""}),[i,c]=p.useState(!1),b=async t=>{var n,m;console.log("FormData profile_photo:",a.profile_photo),t.preventDefault(),c(!0);const g=new FormData;Object.keys(a).forEach(o=>{g.append(o,a[o])});try{await k.post(route("blogs.store"),g,{headers:{"Content-Type":"multipart/form-data"}}),w("Blog created successfully!"),u()}catch(o){console.error("Submit error:",o);const y=((m=(n=o.response)==null?void 0:n.data)==null?void 0:m.message)||"Failed to create blog";N(y)}finally{c(!1)}},h=()=>{const t=a.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");d("slug",t)};return e.jsxs(j,{children:[e.jsx(f,{}),e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-900 rounded-lg shadow",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Create New Blog"}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Upload Image"}),e.jsx("input",{type:"file",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",onChange:t=>d("image",t.target.files[0])}),r.image&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.image})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Title*"}),e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:a.title,onChange:t=>d("title",t.target.value),required:!0}),r.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Slug*"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",className:"mt-1 block w-full rounded-l-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:a.slug,onChange:t=>d("slug",t.target.value),required:!0}),e.jsx("button",{type:"button",onClick:h,className:"mt-1 px-3 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-white rounded-r-md hover:bg-gray-300 dark:hover:bg-gray-600",children:"Generate"})]}),r.slug&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.slug})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Published By*"}),e.jsx("div",{children:e.jsx("div",{className:"mt-1 p-2 rounded-md border border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm",children:(s==null?void 0:s.name)||"Unknown"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Date*"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:a.date,onChange:t=>d("date",t.target.value),required:!0}),r.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category*"}),e.jsx("select",{className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",value:a.category,onChange:t=>d("category",t.target.value),required:!0,children:x.map(t=>e.jsx("option",{value:t,children:t.charAt(0).toUpperCase()+t.slice(1)},t))}),r.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.category})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Summary"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:3,value:a.summary,onChange:t=>d("summary",t.target.value)}),r.summary&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.summary})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description*"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-800 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500",rows:6,value:a.description,onChange:t=>d("description",t.target.value),required:!0}),r.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.description})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50",disabled:i||l,children:i||l?"Creating...":"Create Blog"})})]})]})]})};export{F as default};
