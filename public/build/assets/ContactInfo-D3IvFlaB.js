import{A as N}from"./AdminLayout-Bpo7sCUK.js";import{r as n,j as e,b as C,a as u}from"./app-fjtTz2h4.js";import{L as E}from"./index-CZx9uylL.js";import{a as p,s as b}from"./toast-CZhICbN6.js";/* empty css                      */import{F as j}from"./index.es-Dk_UTOpf.js";import{a as I,b as D}from"./index-DikOPaW-.js";import"./Sidebar-v-2myCdC.js";import"./index-Chjiymov.js";const $=({contactInfo:k})=>{const[f,h]=n.useState(k),[o,d]=n.useState(null),[r,c]=n.useState({title:"",email:"",email2:"",email3:"",address:"",phone:"",phone2:"",phone3:"",mapRoad:"",mapDefault:""}),[i,y]=n.useState(!1),w=a=>{d(a.id),c({title:a.title||"",email:a.email||"",email2:a.email2||"",email3:a.email3||"",address:a.address||"",phone:a.phone||"",phone2:a.phone2||"",phone3:a.phone3||"",mapRoad:a.mapRoad||"",mapDefault:a.mapDefault||""})},g=async a=>{var t,s;if(!r.email||!r.phone){p("Please fill in required fields (Email, Phone)");return}y(!0);try{const{data:l}=await u.patch(`contactInfo/${a}`,{...r});h(x=>x.map(m=>m.id===a?{...m,...l.data}:m)),b("Contact info updated successfully"),d(null)}catch(l){console.error("Update error:",l);const x=((s=(t=l.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to update contact info";p(x)}finally{y(!1)}},v=async a=>{if(confirm("Are you sure you want to delete this contact info?"))try{await u.delete(`contactInfo/${a}`),h(t=>t.filter(s=>s.id!==a)),b("Contact info deleted successfully")}catch(t){console.error("Delete error:",t),p("Failed to delete contact info")}};return e.jsxs(N,{children:[e.jsx(C,{title:"Contact Information"}),e.jsx(E,{}),e.jsxs("div",{className:"max-w-7xl mx-auto p-6 text-gray-800 dark:text-gray-100",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Contact Information"})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsx("tr",{children:["Title","Email","Phone","Address","Actions"].map((a,t)=>e.jsx("th",{scope:"col",className:`px-6 py-3 text-left text-xs font-medium uppercase tracking-wider ${a==="Actions"?"text-right":"text-left"} text-gray-500 dark:text-gray-300`,children:a},t))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map(a=>e.jsx("tr",{children:o===a.id?e.jsxs(e.Fragment,{children:[["title","email","phone","address"].map((t,s)=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",value:r[t],onChange:l=>c({...r,[t]:l.target.value}),className:"w-full px-2 py-1 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white rounded-md"})},s)),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>g(a.id),disabled:i,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs disabled:opacity-50",children:i?"Saving...":"Save"}),e.jsx("button",{onClick:()=>d(null),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 text-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600 dark:text-gray-200 rounded-md text-xs",children:"Cancel"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:a.title}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:[e.jsx("div",{children:a.email}),a.email2&&e.jsx("div",{className:"text-gray-400",children:a.email2}),a.email3&&e.jsx("div",{className:"text-gray-400",children:a.email3})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:[e.jsx("div",{children:a.phone}),a.phone2&&e.jsx("div",{className:"text-gray-400",children:a.phone2}),a.phone3&&e.jsx("div",{className:"text-gray-400",children:a.phone3})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300",children:a.address}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>w(a),className:"action-button edit-btn",title:"Edit",children:e.jsx(j,{icon:I})}),e.jsx("button",{onClick:()=>v(a.id),className:"action-button delete-btn",title:"Delete",children:e.jsx(j,{icon:D})})]})})]})},a.id))})]})}),o!==null&&e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Edit Contact Details"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{label:"Title",key:"title"},{label:"Primary Email*",key:"email"},{label:"Secondary Email",key:"email2"},{label:"Tertiary Email",key:"email3"},{label:"Primary Phone*",key:"phone"},{label:"Secondary Phone",key:"phone2"},{label:"Tertiary Phone",key:"phone3"},{label:"Address",key:"address"},{label:"Map Road",key:"mapRoad"},{label:"Map Default",key:"mapDefault"}].map((a,t)=>e.jsxs("div",{className:a.key==="address"||a.key.includes("map")?"md:col-span-2":"",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a.label}),e.jsx("input",{type:"text",value:r[a.key],onChange:s=>c({...r,[a.key]:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-white"})]},t))}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>d(null),className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-md text-sm",children:"Cancel"}),e.jsx("button",{onClick:()=>g(o),disabled:i,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-sm disabled:opacity-50",children:i?"Updating...":"Update Contact"})]})]})]})]})]})};export{$ as default};
