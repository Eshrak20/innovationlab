import{r,j as e,b as v,a as b}from"./app-BJrvDCdO.js";import{A as S}from"./AdminLayout-B-IGp6Xp.js";import{L as D}from"./index-Dtdo69c3.js";import{a as c,s as f}from"./toast-DMRHFPHA.js";/* empty css                      */import{F as j}from"./index.es-0SNogFF4.js";import{a as E,b as M}from"./index-DikOPaW-.js";import"./Sidebar-CUy48KgT.js";import"./index-Chjiymov.js";const $=({missions:w})=>{const[m,g]=r.useState(w),[d,i]=r.useState(null),[l,u]=r.useState({text:""}),[h,y]=r.useState(!1),k=t=>{i(t.id),u({text:t.text})},p=async t=>{var a,s;if(!l.text.trim()){c("Please enter mission text");return}y(!0);try{const{data:n}=await b.patch(`/mission/${t}`,{text:l.text});g(o=>o.map(x=>x.id===t?{...x,text:n.data.text}:x)),f("Mission updated successfully"),i(null)}catch(n){const o=((s=(a=n.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to update mission";c(o)}finally{y(!1)}},N=async t=>{if(confirm("Are you sure you want to delete this mission?"))try{await b.delete(`mission/${t}`),g(a=>a.filter(s=>s.id!==t)),f("Mission deleted successfully")}catch{c("Failed to delete mission")}};return e.jsxs(S,{children:[e.jsx(v,{title:"Mission Data"}),e.jsx(D,{}),e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:"Mission Statements"}),e.jsxs("div",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium dark:bg-blue-900 dark:text-blue-100",children:["Total: ",m.length]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-16",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mission Statement"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider w-32",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-2xl font-serif text-gray-500 dark:text-gray-400",children:["0",t.id]})}),e.jsx("td",{className:"px-6 py-4",children:d===t.id?e.jsx("textarea",{value:l.text,onChange:a=>u({text:a.target.value}),onKeyDown:a=>{a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),p(d))},className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white",rows:3,autoFocus:!0}):e.jsx("p",{className:"text-gray-800 dark:text-gray-200",children:t.text})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:d===t.id?e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>i(null),className:"px-3 py-1 bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500 text-gray-800 dark:text-white rounded-md text-xs",children:"Cancel"}),e.jsx("button",{onClick:()=>p(t.id),disabled:h,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded-md text-xs disabled:opacity-50",children:h?"Saving...":"Save"})]}):e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>k(t),className:"action-button edit-btn",title:"Edit",children:e.jsx(j,{icon:E})}),e.jsx("button",{onClick:()=>N(t.id),className:"action-button delete-btn",title:"Delete",children:e.jsx(j,{icon:M})})]})})]},t.id))})]})})}),e.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-300",children:"Last Updated"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:new Date().toLocaleDateString()})]})})]})]})};export{$ as default};
